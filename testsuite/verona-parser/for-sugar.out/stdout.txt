(class
  ()
  []
  ()
  [
    (class
      $module-0
      []
      ()
      [
        (using (typeref [ (modulename $module-1 []) ]))
        (using (typeref [ (modulename $module-2 []) ]))
        (class
          List
          [ (typeparam T () ()) ]
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype
                  [
                    (typeref
                      [ (typename List [ (typeref [ (typename T []) ]) ]) ])
                    (imm )
                  ])
                [
                  (let $0 (infertype $65))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (function
          for_sum
          (lambda
            []
            [
              (param
                x
                (typeref
                  [ (typename List [ (typeref [ (typename U32 []) ]) ]) ])
                ())
            ]
            (typeref [ (typename U32 []) ])
            [
              (var sum (infertype $0))
              (oftype (ref sum) (typeref [ (typename U32 []) ]))
              (let $0 (infertype $66))
              (assign (ref $0) (int 0))
              (assign (ref sum) (ref $0))
              (let $1 (infertype $67))
              (assign (ref $1) (select () [ (typename values []) ] (ref x)))
              (let $2 (infertype $68))
              (assign (ref $2) (select () [ (typename for []) ] (ref $1)))
              (let $5 (infertype $71))
              (assign
                (ref $5)
                (lambda
                  []
                  [ (param a (infertype $2) ()) ]
                  (infertype $1)
                  [
                    (free sum)
                    (free sum)
                    (let $3 (infertype $69))
                    (assign
                      (ref $3)
                      (select (ref sum) [ (typename + []) ] (ref a)))
                    (let $4 (infertype $70))
                    (assign (ref $4) (ref sum))
                    (assign (ref sum) (ref $3))
                    (ref $4)
                  ]))
              (let $6 (infertype $72))
              (assign
                (ref $6)
                (select (ref $2) [ (typename apply []) ] (ref $5)))
              (let $7 (infertype $73))
              (assign
                (ref $7)
                (select (ref $6) [ (typename apply []) ] (ref sum)))
              (ref $7)
            ]))
        (function
          while_sum
          (lambda
            []
            [
              (param
                x
                (typeref
                  [ (typename List [ (typeref [ (typename U32 []) ]) ]) ])
                ())
            ]
            (typeref [ (typename U32 []) ])
            [
              (var sum (infertype $3))
              (oftype (ref sum) (typeref [ (typename U32 []) ]))
              (let $0 (infertype $74))
              (assign (ref $0) (int 0))
              (assign (ref sum) (ref $0))
              (let iter (infertype $4))
              (let $1 (infertype $75))
              (assign (ref $1) (select (ref x) [ (typename values []) ] ()))
              (assign (ref iter) (ref $1))
              (let $3 (infertype $77))
              (assign
                (ref $3)
                (lambda
                  []
                  []
                  (infertype $5)
                  [
                    (free iter)
                    (let $2 (infertype $76))
                    (assign
                      (ref $2)
                      (select (ref iter) [ (typename has_value []) ] ()))
                    (ref $2)
                  ]))
              (let $4 (infertype $78))
              (assign (ref $4) (select () [ (typename while []) ] (ref $3)))
              (let $9 (infertype $83))
              (assign
                (ref $9)
                (lambda
                  []
                  []
                  (infertype $6)
                  [
                    (let a (infertype $7))
                    (free iter)
                    (let $5 (infertype $79))
                    (assign
                      (ref $5)
                      (select (ref iter) [ (typename apply []) ] ()))
                    (assign (ref a) (ref $5))
                    (free iter)
                    (let $6 (infertype $80))
                    (assign
                      (ref $6)
                      (select () [ (typename next []) ] (ref iter)))
                    (free sum)
                    (free sum)
                    (let $7 (infertype $81))
                    (assign
                      (ref $7)
                      (select (ref sum) [ (typename + []) ] (ref a)))
                    (let $8 (infertype $82))
                    (assign (ref $8) (ref sum))
                    (assign (ref sum) (ref $7))
                    (ref $8)
                  ]))
              (let $10 (infertype $84))
              (assign
                (ref $10)
                (select (ref $4) [ (typename apply []) ] (ref $9)))
              (let $11 (infertype $85))
              (assign
                (ref $11)
                (select (ref $10) [ (typename apply []) ] (ref sum)))
              (ref $11)
            ]))
      ])
    (class
      $module-1
      []
      ()
      [
        (using (typeref [ (modulename $module-3 []) ]))
        (function
          for
          (lambda
            [
              (typeparam L () (typeref [ (typename NoLabel []) ]))
              (typeparam T () ())
              (typeparam U () ())
              (typeparam V () ())
            ]
            [
              (param
                iter
                (typeref
                  [ (typename Iterator [ (typeref [ (typename T []) ]) ]) ])
                ())
            ]
            (functiontype
              (functiontype
                (typeref [ (typename T []) ])
                (uniontype
                  [
                    (typeref [ (typename U []) ])
                    (throwtype (typeref [ (typename V []) ]))
                  ]))
              (uniontype
                [
                  (typeref [ (typename Done []) ])
                  (throwtype (typeref [ (typename V []) ]))
                ]))
            [
              (let $20 (infertype $104))
              (assign
                (ref $20)
                (lambda
                  []
                  [ (param body (infertype $9) ()) ]
                  (infertype $8)
                  [
                    (let $1 (infertype $87))
                    (assign
                      (ref $1)
                      (lambda
                        []
                        []
                        (infertype $10)
                        [
                          (let $0 (infertype $86))
                          (assign (ref $0) (bool true))
                          (ref $0)
                        ]))
                    (let $2 (infertype $88))
                    (assign
                      (ref $2)
                      (select () [ (typename while []) ] (ref $1)))
                    (let $18 (infertype $102))
                    (assign
                      (ref $18)
                      (lambda
                        []
                        []
                        (infertype $11)
                        [
                          (let $6 (infertype $92))
                          (assign
                            (ref $6)
                            (lambda
                              []
                              []
                              (infertype $12)
                              [
                                (free body)
                                (free iter)
                                (let $3 (infertype $89))
                                (assign
                                  (ref $3)
                                  (select (ref iter) [ (typename apply []) ] ()))
                                (let $4 (infertype $90))
                                (assign
                                  (ref $4)
                                  (select
                                    (ref body)
                                    [ (typename apply []) ]
                                    (ref $3)))
                                (let $5 (infertype $91))
                                (assign
                                  (ref $5)
                                  (select
                                    ()
                                    [
                                      (typename continue [])
                                      (typename create [])
                                    ]
                                    ()))
                                (ref $5)
                              ]))
                          (let $11 (infertype $96))
                          (assign
                            (ref $11)
                            (lambda
                              []
                              [ (param $7 () ()) ]
                              (infertype $13)
                              [
                                (let $8 (infertype $93))
                                (assign
                                  (ref $8)
                                  (select
                                    (param $7 () ())
                                    [ (typename == []) ]
                                    (ref $7)))
                                (let $9 (infertype $94))
                                (assign
                                  (ref $9)
                                  (select
                                    ()
                                    [ (typename requires []) ]
                                    (ref $8)))
                                (let $10 (infertype $95))
                                (assign
                                  (ref $10)
                                  (select
                                    ()
                                    [ (typename break []) (typename create []) ]
                                    ()))
                                (ref $10)
                              ]))
                          (let $16 (infertype $100))
                          (assign
                            (ref $16)
                            (lambda
                              []
                              [ (param $12 () ()) ]
                              (infertype $14)
                              [
                                (let $13 (infertype $97))
                                (assign
                                  (ref $13)
                                  (select
                                    (param $12 () ())
                                    [ (typename == []) ]
                                    (ref $12)))
                                (let $14 (infertype $98))
                                (assign
                                  (ref $14)
                                  (select
                                    ()
                                    [ (typename requires []) ]
                                    (ref $13)))
                                (free iter)
                                (let $15 (infertype $99))
                                (assign
                                  (ref $15)
                                  (select () [ (typename next []) ] (ref iter)))
                                (ref $15)
                              ]))
                          (let $17 (infertype $101))
                          (assign
                            (ref $17)
                            (try (ref $6) [ (ref $11) (ref $16) ]))
                          (ref $17)
                        ]))
                    (let $19 (infertype $103))
                    (assign
                      (ref $19)
                      (select (ref $2) [ (typename apply []) ] (ref $18)))
                    (ref $19)
                  ]))
              (ref $20)
            ]))
        (using (typeref [ (modulename $module-4 []) ]))
        (using (typeref [ (modulename $module-3 []) ]))
        (class
          Empty
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename Empty []) ]) (imm ) ])
                [
                  (let $0 (infertype $105))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (interface
          Iterator
          [ (typeparam T () ()) ]
          ()
          [
            (function
              apply
              (lambda
                [ (typeparam S (isecttype [ (Self ) (mut ) ]) ()) ]
                [ (param self (typeref [ (typename S []) ]) ()) ]
                (uniontype
                  [
                    (viewtype
                      (typeref [ (typename S []) ])
                      (typeref [ (typename T []) ]))
                    (throwtype (typeref [ (typename Empty []) ]))
                  ])
                []))
            (function
              next
              (lambda
                []
                [ (param self (isecttype [ (Self ) (mut ) ]) ()) ]
                ()
                []))
            (function
              filter
              (lambda
                [
                  (typeparam
                    S
                    (isecttype
                      [
                        (typeref
                          [
                            (typename
                              Iterator
                              [ (typeref [ (typename T []) ]) ])
                          ])
                        (mut )
                      ])
                    ())
                  (typeparam
                    R
                    (isecttype
                      [
                        (typeref
                          [
                            (typename Filter [ (typeref [ (typename T []) ]) ])
                          ])
                        (mut )
                      ])
                    ())
                ]
                [
                  (param
                    self
                    (viewtype
                      (typeref [ (typename R []) ])
                      (typeref [ (typename S []) ]))
                    ())
                  (param
                    f
                    (functiontype
                      (viewtype
                        (viewtype
                          (typeref [ (typename R []) ])
                          (typeref [ (typename S []) ]))
                        (typeref [ (typename T []) ]))
                      (typeref [ (typename Bool []) ]))
                    ())
                ]
                (typeref [ (typename R []) ])
                [
                  (let
                    $0
                    (tupletype
                      [
                        (viewtype
                          (typeref [ (typename R []) ])
                          (typeref [ (typename S []) ]))
                        (functiontype
                          (viewtype
                            (viewtype
                              (typeref [ (typename R []) ])
                              (typeref [ (typename S []) ]))
                            (typeref [ (typename T []) ]))
                          (typeref [ (typename Bool []) ]))
                      ]))
                  (assign (ref $0) (tuple [ (ref self) (ref f) ]))
                  (let $1 (infertype $107))
                  (assign
                    (ref $1)
                    (select
                      ()
                      [ (typename Filter []) (typename create []) ]
                      (ref $0)))
                  (ref $1)
                ]))
          ])
        (class
          Repeat
          [ (typeparam T () ()) ]
          (typeref [ (typename Iterator [ (typeref [ (typename T []) ]) ]) ])
          [
            (field value (typeref [ (typename T []) ]) ())
            (function
              create
              (lambda
                [
                  (typeparam
                    R
                    (typeref
                      [ (typename Repeat [ (typeref [ (typename T []) ]) ]) ])
                    ())
                ]
                [
                  (param
                    value
                    (viewtype
                      (typeref [ (typename R []) ])
                      (typeref [ (typename T []) ]))
                    ())
                ]
                (typeref [ (typename R []) ])
                [
                  (let $0 (infertype $108))
                  (assign (ref $0) (new () (ref value)))
                  (ref $0)
                ]))
            (function
              apply
              (lambda
                [
                  (typeparam
                    S
                    (isecttype
                      [
                        (typeref
                          [
                            (typename Repeat [ (typeref [ (typename T []) ]) ])
                          ])
                        (mut )
                      ])
                    ())
                ]
                [ (param self (typeref [ (typename S []) ]) ()) ]
                (viewtype
                  (typeref [ (typename S []) ])
                  (typeref [ (typename T []) ]))
                [
                  (let $0 (infertype $109))
                  (assign
                    (ref $0)
                    (select (ref self) [ (typename value []) ] ()))
                  (ref $0)
                ]))
            (function
              next
              (lambda
                []
                [
                  (param
                    self
                    (isecttype
                      [
                        (typeref
                          [
                            (typename Repeat [ (typeref [ (typename T []) ]) ])
                          ])
                        (mut )
                      ])
                    ())
                ]
                ()
                []))
          ])
        (class
          Chain
          [ (typeparam T () ()) ]
          (typeref [ (typename Iterator [ (typeref [ (typename T []) ]) ]) ])
          [
            (field
              value
              (isecttype
                [
                  (typeref
                    [
                      (typename
                        Iterator
                        [
                          (isecttype
                            [
                              (typeref
                                [
                                  (typename
                                    Iterator
                                    [ (typeref [ (typename T []) ]) ])
                                ])
                              (mut )
                            ])
                        ])
                    ])
                  (mut )
                ])
              ())
            (function
              create
              (lambda
                [
                  (typeparam
                    R
                    (typeref
                      [ (typename Chain [ (typeref [ (typename T []) ]) ]) ])
                    ())
                ]
                [
                  (param
                    value
                    (viewtype
                      (typeref [ (typename R []) ])
                      (isecttype
                        [
                          (typeref
                            [
                              (typename
                                Iterator
                                [
                                  (isecttype
                                    [
                                      (typeref
                                        [
                                          (typename
                                            Iterator
                                            [ (typeref [ (typename T []) ]) ])
                                        ])
                                      (mut )
                                    ])
                                ])
                            ])
                          (mut )
                        ]))
                    ())
                ]
                (typeref [ (typename R []) ])
                [
                  (let $0 (infertype $110))
                  (assign (ref $0) (new () (ref value)))
                  (ref $0)
                ]))
            (function
              apply
              (lambda
                [
                  (typeparam
                    S
                    (isecttype
                      [
                        (typeref
                          [ (typename Chain [ (typeref [ (typename T []) ]) ]) ])
                        (mut )
                      ])
                    ())
                ]
                [ (param self (typeref [ (typename S []) ]) ()) ]
                (uniontype
                  [
                    (viewtype
                      (typeref [ (typename S []) ])
                      (typeref [ (typename T []) ]))
                    (throwtype (typeref [ (typename Empty []) ]))
                  ])
                [
                  (let $0 (infertype $111))
                  (assign
                    (ref $0)
                    (select (ref self) [ (typename value []) ] ()))
                  (let $1 (infertype $112))
                  (assign (ref $1) (select (ref $0) [ (typename apply []) ] ()))
                  (ref $1)
                ]))
            (function
              next
              (lambda
                []
                [
                  (param
                    self
                    (isecttype
                      [
                        (typeref
                          [ (typename Chain [ (typeref [ (typename T []) ]) ]) ])
                        (mut )
                      ])
                    ())
                ]
                ()
                [
                  (let $0 (infertype $113))
                  (assign
                    (ref $0)
                    (select (ref self) [ (typename value []) ] ()))
                  (let $1 (infertype $114))
                  (assign (ref $1) (select (ref $0) [ (typename next []) ] ()))
                  (ref $1)
                ]))
          ])
        (class
          Filter
          [ (typeparam T () ()) ]
          (typeref [ (typename Iterator [ (typeref [ (typename T []) ]) ]) ])
          [
            (field
              it
              (isecttype
                [
                  (typeref
                    [ (typename Iterator [ (typeref [ (typename T []) ]) ]) ])
                  (mut )
                ])
              ())
            (field
              f
              (functiontype
                (typeref [ (typename T []) ])
                (typeref [ (typename Bool []) ]))
              ())
            (field ok (typeref [ (typename Bool []) ]) ())
            (function
              create
              (lambda
                []
                [
                  (param
                    it
                    (isecttype
                      [
                        (typeref
                          [
                            (typename
                              Iterator
                              [ (typeref [ (typename T []) ]) ])
                          ])
                        (mut )
                      ])
                    ())
                  (param
                    f
                    (functiontype
                      (typeref [ (typename T []) ])
                      (typeref [ (typename Bool []) ]))
                    ())
                ]
                (isecttype
                  [
                    (typeref
                      [ (typename Filter [ (typeref [ (typename T []) ]) ]) ])
                    (mut )
                  ])
                [
                  (let $0 (infertype $115))
                  (assign (ref $0) (bool false))
                  (let
                    $1
                    (tupletype
                      [
                        (isecttype
                          [
                            (typeref
                              [
                                (typename
                                  Iterator
                                  [ (typeref [ (typename T []) ]) ])
                              ])
                            (mut )
                          ])
                        (functiontype
                          (typeref [ (typename T []) ])
                          (typeref [ (typename Bool []) ]))
                        (infertype $115)
                      ]))
                  (assign (ref $1) (tuple [ (ref it) (ref f) (ref $0) ]))
                  (let $2 (infertype $117))
                  (assign (ref $2) (new () (ref $1)))
                  (ref $2)
                ]))
            (function
              apply
              (lambda
                [
                  (typeparam
                    S
                    (isecttype
                      [
                        (typeref
                          [
                            (typename Filter [ (typeref [ (typename T []) ]) ])
                          ])
                        (mut )
                      ])
                    ())
                ]
                [ (param self (typeref [ (typename S []) ]) ()) ]
                (uniontype
                  [
                    (viewtype
                      (typeref [ (typename S []) ])
                      (typeref [ (typename T []) ]))
                    (throwtype (typeref [ (typename Empty []) ]))
                  ])
                [
                  (let $0 (infertype $118))
                  (assign
                    (ref $0)
                    (select (ref self) [ (typename _advance []) ] ()))
                  (let $1 (infertype $119))
                  (assign (ref $1) (select (ref self) [ (typename it []) ] ()))
                  (ref $1)
                ]))
            (function
              next
              (lambda
                []
                [
                  (param
                    self
                    (isecttype
                      [
                        (typeref
                          [
                            (typename Filter [ (typeref [ (typename T []) ]) ])
                          ])
                        (mut )
                      ])
                    ())
                ]
                ()
                [
                  (let $0 (infertype $120))
                  (assign (ref $0) (select (ref self) [ (typename it []) ] ()))
                  (let $1 (infertype $121))
                  (assign (ref $1) (select (ref $0) [ (typename next []) ] ()))
                  (let $2 (infertype $122))
                  (assign
                    (ref $2)
                    (select (ref self) [ (typename _advance []) ] ()))
                  (ref $2)
                ]))
            (function
              _advance
              (lambda
                []
                [ (param self (isecttype [ (Self ) (mut ) ]) ()) ]
                ()
                [
                  (let $0 (infertype $123))
                  (assign (ref $0) (select (ref self) [ (typename ok []) ] ()))
                  (let $1 (infertype $124))
                  (assign (ref $1) (select () [ (typename not []) ] (ref $0)))
                  (let $2 (infertype $125))
                  (assign (ref $2) (select () [ (typename if []) ] (ref $1)))
                  (let $17 (infertype $140))
                  (assign
                    (ref $17)
                    (lambda
                      []
                      []
                      (infertype $15)
                      [
                        (free self)
                        (var $3 (infertype $126))
                        (assign
                          (ref $3)
                          (select (ref self) [ (typename ok []) ] ()))
                        (let $4 (infertype $127))
                        (assign (ref $4) (bool true))
                        (assign (ref $3) (ref $4))
                        (let $14 (infertype $137))
                        (assign
                          (ref $14)
                          (lambda
                            []
                            []
                            (infertype $16)
                            [
                              (let $8 (infertype $131))
                              (assign
                                (ref $8)
                                (lambda
                                  []
                                  []
                                  (infertype $17)
                                  [
                                    (free self)
                                    (free self)
                                    (let $5 (infertype $128))
                                    (assign
                                      (ref $5)
                                      (select
                                        (ref self)
                                        [ (typename it []) ]
                                        ()))
                                    (let $6 (infertype $129))
                                    (assign
                                      (ref $6)
                                      (select
                                        (ref self)
                                        [ (typename f []) ]
                                        (ref $5)))
                                    (let $7 (infertype $130))
                                    (assign
                                      (ref $7)
                                      (select () [ (typename not []) ] (ref $6)))
                                    (ref $7)
                                  ]))
                              (let $9 (infertype $132))
                              (assign
                                (ref $9)
                                (select () [ (typename while []) ] (ref $8)))
                              (let $12 (infertype $135))
                              (assign
                                (ref $12)
                                (lambda
                                  []
                                  []
                                  (infertype $18)
                                  [
                                    (free self)
                                    (let $10 (infertype $133))
                                    (assign
                                      (ref $10)
                                      (select
                                        (ref self)
                                        [ (typename it []) ]
                                        ()))
                                    (let $11 (infertype $134))
                                    (assign
                                      (ref $11)
                                      (select
                                        (ref $10)
                                        [ (typename next []) ]
                                        ()))
                                    (ref $11)
                                  ]))
                              (let $13 (infertype $136))
                              (assign
                                (ref $13)
                                (select
                                  (ref $9)
                                  [ (typename apply []) ]
                                  (ref $12)))
                              (ref $13)
                            ]))
                        (let $15 (infertype $138))
                        (assign
                          (ref $15)
                          (lambda
                            []
                            [ (param Empty (infertype $20) ()) ]
                            (infertype $19)
                            []))
                        (let $16 (infertype $139))
                        (assign (ref $16) (try (ref $14) [ (ref $15) ]))
                        (ref $16)
                      ]))
                  (let $18 (infertype $141))
                  (assign
                    (ref $18)
                    (select (ref $2) [ (typename apply []) ] (ref $17)))
                  (ref $18)
                ]))
          ])
        (using (typeref [ (modulename $module-4 []) ]))
        (using (typeref [ (modulename $module-3 []) ]))
        (class
          Option
          [ (typeparam T () ()) ]
          (typeref [ (typename Iterator [ (typeref [ (typename T []) ]) ]) ])
          [
            (field
              v
              (uniontype
                [
                  (typeref [ (typename T []) ])
                  (typeref [ (typename None []) ])
                ])
              ())
            (function
              create
              (lambda
                [
                  (typeparam
                    S
                    (typeref
                      [ (typename Option [ (typeref [ (typename T []) ]) ]) ])
                    ())
                ]
                [
                  (param
                    v
                    (extracttype
                      (typeref [ (typename S []) ])
                      (typeref [ (typename T []) ]))
                    ())
                ]
                (typeref [ (typename S []) ])
                [
                  (let $0 (infertype $142))
                  (assign (ref $0) (new () (ref v)))
                  (ref $0)
                ]))
            (function
              empty
              (lambda
                [
                  (typeparam
                    S
                    (typeref
                      [ (typename Option [ (typeref [ (typename T []) ]) ]) ])
                    ())
                ]
                []
                (typeref [ (typename S []) ])
                [
                  (let $0 (infertype $143))
                  (assign
                    (ref $0)
                    (select () [ (typename None []) (typename create []) ] ()))
                  (let $1 (infertype $144))
                  (assign (ref $1) (new () (ref $0)))
                  (ref $1)
                ]))
            (function
              has_value
              (lambda
                []
                [
                  (param
                    self
                    (typeref
                      [ (typename Option [ (typeref [ (typename T []) ]) ]) ])
                    ())
                ]
                (typeref [ (typename Bool []) ])
                [
                  (let $0 (infertype $145))
                  (assign (ref $0) (select (ref self) [ (typename v []) ] ()))
                  (let $5 (infertype $149))
                  (assign
                    (ref $5)
                    (lambda
                      []
                      [ (param $1 () ()) ]
                      (infertype $21)
                      [
                        (let $2 (infertype $146))
                        (assign
                          (ref $2)
                          (select
                            (param $1 () ())
                            [ (typename == []) ]
                            (ref $1)))
                        (let $3 (infertype $147))
                        (assign
                          (ref $3)
                          (select () [ (typename requires []) ] (ref $2)))
                        (let $4 (infertype $148))
                        (assign (ref $4) (bool false))
                        (ref $4)
                      ]))
                  (let $7 (infertype $151))
                  (assign
                    (ref $7)
                    (lambda
                      []
                      []
                      (infertype $22)
                      [
                        (let $6 (infertype $150))
                        (assign (ref $6) (bool true))
                        (ref $6)
                      ]))
                  (let $8 (infertype $152))
                  (assign (ref $8) (match (ref $0) [ (ref $5) (ref $7) ]))
                  (ref $8)
                ]))
            (function
              apply
              (lambda
                [
                  (typeparam
                    S
                    (typeref
                      [ (typename Option [ (typeref [ (typename T []) ]) ]) ])
                    ())
                ]
                [ (param self (typeref [ (typename S []) ]) ()) ]
                (uniontype
                  [
                    (viewtype
                      (typeref [ (typename S []) ])
                      (typeref [ (typename T []) ]))
                    (throwtype (typeref [ (typename Empty []) ]))
                  ])
                [
                  (let $0 (infertype $153))
                  (assign (ref $0) (select (ref self) [ (typename v []) ] ()))
                  (let $1 (infertype $154))
                  (assign
                    (ref $1)
                    (lambda
                      []
                      [
                        (param
                          v
                          (viewtype
                            (typeref [ (typename S []) ])
                            (typeref [ (typename T []) ]))
                          ())
                      ]
                      (infertype $23)
                      [ (ref v) ]))
                  (let $3 (infertype $156))
                  (assign
                    (ref $3)
                    (lambda
                      []
                      []
                      (infertype $24)
                      [
                        (let $2 (infertype $155))
                        (assign
                          (ref $2)
                          (select
                            ()
                            [ (typename Empty []) (typename create []) ]
                            ()))
                        (throw (ref $2))
                      ]))
                  (let $4 (infertype $157))
                  (assign (ref $4) (match (ref $0) [ (ref $1) (ref $3) ]))
                  (ref $4)
                ]))
            (function
              value_or
              (lambda
                [
                  (typeparam
                    S
                    (typeref
                      [ (typename Option [ (typeref [ (typename T []) ]) ]) ])
                    ())
                  (typeparam U () ())
                ]
                [
                  (param self (typeref [ (typename S []) ]) ())
                  (param default (typeref [ (typename U []) ]) ())
                ]
                (uniontype
                  [
                    (viewtype
                      (typeref [ (typename S []) ])
                      (typeref [ (typename T []) ]))
                    (typeref [ (typename U []) ])
                  ])
                [
                  (let $0 (infertype $158))
                  (assign (ref $0) (select (ref self) [ (typename v []) ] ()))
                  (let $1 (infertype $159))
                  (assign
                    (ref $1)
                    (lambda
                      []
                      [
                        (param
                          v
                          (viewtype
                            (typeref [ (typename S []) ])
                            (typeref [ (typename T []) ]))
                          ())
                      ]
                      (infertype $25)
                      [ (ref v) ]))
                  (let $2 (infertype $160))
                  (assign
                    (ref $2)
                    (lambda
                      []
                      []
                      (infertype $26)
                      [ (free default) (ref default) ]))
                  (let $3 (infertype $161))
                  (assign (ref $3) (match (ref $0) [ (ref $1) (ref $2) ]))
                  (ref $3)
                ]))
            (function
              extract
              (lambda
                [
                  (typeparam
                    S
                    (isecttype
                      [
                        (typeref
                          [
                            (typename Option [ (typeref [ (typename T []) ]) ])
                          ])
                        (mut )
                      ])
                    ())
                ]
                [ (param self (typeref [ (typename S []) ]) ()) ]
                (uniontype
                  [
                    (extracttype
                      (typeref [ (typename S []) ])
                      (typeref [ (typename T []) ]))
                    (throwtype (typeref [ (typename Empty []) ]))
                  ])
                [
                  (let $0 (infertype $162))
                  (assign (ref $0) (select (ref self) [ (typename v []) ] ()))
                  (let $4 (infertype $166))
                  (assign
                    (ref $4)
                    (lambda
                      []
                      [
                        (param
                          v
                          (extracttype
                            (typeref [ (typename S []) ])
                            (typeref [ (typename T []) ]))
                          ())
                      ]
                      (infertype $27)
                      [
                        (free self)
                        (var $1 (infertype $163))
                        (assign
                          (ref $1)
                          (select (ref self) [ (typename v []) ] ()))
                        (let $2 (infertype $164))
                        (assign
                          (ref $2)
                          (select
                            ()
                            [ (typename None []) (typename create []) ]
                            ()))
                        (let $3 (infertype $165))
                        (assign (ref $3) (ref $1))
                        (assign (ref $1) (ref $2))
                        (ref $3)
                      ]))
                  (let $6 (infertype $168))
                  (assign
                    (ref $6)
                    (lambda
                      []
                      []
                      (infertype $28)
                      [
                        (let $5 (infertype $167))
                        (assign
                          (ref $5)
                          (select
                            ()
                            [ (typename Empty []) (typename create []) ]
                            ()))
                        (throw (ref $5))
                      ]))
                  (let $7 (infertype $169))
                  (assign (ref $7) (match (ref $0) [ (ref $4) (ref $6) ]))
                  (ref $7)
                ]))
            (function
              extract_or
              (lambda
                [
                  (typeparam
                    S
                    (isecttype
                      [
                        (typeref
                          [
                            (typename Option [ (typeref [ (typename T []) ]) ])
                          ])
                        (mut )
                      ])
                    ())
                  (typeparam U () ())
                ]
                [
                  (param self (typeref [ (typename S []) ]) ())
                  (param default (typeref [ (typename U []) ]) ())
                ]
                (uniontype
                  [
                    (extracttype
                      (typeref [ (typename S []) ])
                      (typeref [ (typename T []) ]))
                    (typeref [ (typename U []) ])
                  ])
                [
                  (let $0 (infertype $170))
                  (assign (ref $0) (select (ref self) [ (typename v []) ] ()))
                  (let $4 (infertype $174))
                  (assign
                    (ref $4)
                    (lambda
                      []
                      [
                        (param
                          v
                          (extracttype
                            (typeref [ (typename S []) ])
                            (typeref [ (typename T []) ]))
                          ())
                      ]
                      (infertype $29)
                      [
                        (free self)
                        (var $1 (infertype $171))
                        (assign
                          (ref $1)
                          (select (ref self) [ (typename v []) ] ()))
                        (let $2 (infertype $172))
                        (assign
                          (ref $2)
                          (select
                            ()
                            [ (typename None []) (typename create []) ]
                            ()))
                        (let $3 (infertype $173))
                        (assign (ref $3) (ref $1))
                        (assign (ref $1) (ref $2))
                        (ref $3)
                      ]))
                  (let $5 (infertype $175))
                  (assign
                    (ref $5)
                    (lambda
                      []
                      []
                      (infertype $30)
                      [ (free default) (ref default) ]))
                  (let $6 (infertype $176))
                  (assign (ref $6) (match (ref $0) [ (ref $4) (ref $5) ]))
                  (ref $6)
                ]))
          ])
      ])
    (class
      $module-2
      []
      ()
      [
        (class
          I8
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename I8 []) ]) (imm ) ])
                [
                  (let $0 (infertype $177))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          I16
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename I16 []) ]) (imm ) ])
                [
                  (let $0 (infertype $178))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          I32
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename I32 []) ]) (imm ) ])
                [
                  (let $0 (infertype $179))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          I64
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename I64 []) ]) (imm ) ])
                [
                  (let $0 (infertype $180))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          I128
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename I128 []) ]) (imm ) ])
                [
                  (let $0 (infertype $181))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          ISize
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename ISize []) ]) (imm ) ])
                [
                  (let $0 (infertype $182))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (typealias
          Signed
          []
          (uniontype
            [
              (typeref [ (typename I8 []) ])
              (typeref [ (typename I16 []) ])
              (typeref [ (typename I32 []) ])
              (typeref [ (typename I64 []) ])
              (typeref [ (typename I128 []) ])
              (typeref [ (typename ISize []) ])
            ])
          [])
        (class
          U8
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename U8 []) ]) (imm ) ])
                [
                  (let $0 (infertype $183))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          U16
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename U16 []) ]) (imm ) ])
                [
                  (let $0 (infertype $184))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          U32
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename U32 []) ]) (imm ) ])
                [
                  (let $0 (infertype $185))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          U64
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename U64 []) ]) (imm ) ])
                [
                  (let $0 (infertype $186))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          U128
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename U128 []) ]) (imm ) ])
                [
                  (let $0 (infertype $187))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          USize
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename USize []) ]) (imm ) ])
                [
                  (let $0 (infertype $188))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (typealias
          Unsigned
          []
          (uniontype
            [
              (typeref [ (typename U8 []) ])
              (typeref [ (typename U16 []) ])
              (typeref [ (typename U32 []) ])
              (typeref [ (typename U64 []) ])
              (typeref [ (typename U128 []) ])
              (typeref [ (typename USize []) ])
            ])
          [])
        (typealias
          Integer
          []
          (uniontype
            [
              (typeref [ (typename Signed []) ])
              (typeref [ (typename Unsigned []) ])
            ])
          [])
        (class
          F32
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename F32 []) ]) (imm ) ])
                [
                  (let $0 (infertype $189))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          F64
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename F64 []) ]) (imm ) ])
                [
                  (let $0 (infertype $190))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (typealias
          Float
          []
          (uniontype
            [ (typeref [ (typename F32 []) ]) (typeref [ (typename F64 []) ]) ])
          [])
      ])
    (class
      $module-3
      []
      ()
      [
        (function
          ~
          (lambda
            [
              (typeparam T () ())
              (typeparamlist U () ())
              (typeparam V () ())
              (typeparam
                R
                (functiontype (typelist U) (typeref [ (typename V []) ]))
                ())
            ]
            [
              (param
                f
                (viewtype
                  (typeref [ (typename R []) ])
                  (functiontype
                    (tupletype [ (typeref [ (typename T []) ]) (typelist U) ])
                    (typeref [ (typename V []) ])))
                ())
              (param
                x
                (viewtype
                  (typeref [ (typename R []) ])
                  (typeref [ (typename T []) ]))
                ())
            ]
            (typeref [ (typename R []) ])
            [
              (let $2 (infertype $193))
              (assign
                (ref $2)
                (lambda
                  []
                  [ (param y (typelist U) ()) ]
                  (infertype $31)
                  [
                    (free f)
                    (free x)
                    (let
                      $0
                      (tupletype
                        [
                          (viewtype
                            (typeref [ (typename R []) ])
                            (typeref [ (typename T []) ]))
                          (typelist U)
                        ]))
                    (assign (ref $0) (tuple [ (ref x) (ref y) ]))
                    (let $1 (infertype $192))
                    (assign
                      (ref $1)
                      (select (ref f) [ (typename apply []) ] (ref $0)))
                    (ref $1)
                  ]))
              (ref $2)
            ]))
        (function
          |>
          (lambda
            [ (typeparamlist T () ()) (typeparam U () ()) ]
            [
              (param x (typelist T) ())
              (param
                y
                (functiontype (typelist T) (typeref [ (typename U []) ]))
                ())
            ]
            (typeref [ (typename U []) ])
            [
              (let $0 (infertype $194))
              (assign (ref $0) (select (ref y) [ (typename apply []) ] (ref x)))
              (ref $0)
            ]))
        (using (typeref [ (modulename $module-4 []) ]))
        (class
          FalseBranch
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename FalseBranch []) ]) (imm ) ])
                [
                  (let $0 (infertype $195))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (function
          if
          (lambda
            [ (typeparam T () ()) ]
            [
              (param
                cond
                (functiontype (tupletype []) (typeref [ (typename Bool []) ]))
                ())
            ]
            (functiontype
              (functiontype (tupletype []) (typeref [ (typename T []) ]))
              (uniontype
                [
                  (typeref
                    [ (typename Done [ (typeref [ (typename T []) ]) ]) ])
                  (typeref [ (typename FalseBranch []) ])
                ]))
            [
              (let $13 (infertype $207))
              (assign
                (ref $13)
                (lambda
                  []
                  [ (param ontrue (infertype $33) ()) ]
                  (infertype $32)
                  [
                    (free cond)
                    (let $0 (infertype $196))
                    (assign
                      (ref $0)
                      (select (ref cond) [ (typename apply []) ] ()))
                    (let $6 (infertype $201))
                    (assign
                      (ref $6)
                      (lambda
                        []
                        [ (param $1 () ()) ]
                        (infertype $34)
                        [
                          (let $2 (infertype $197))
                          (assign
                            (ref $2)
                            (select
                              (param $1 () ())
                              [ (typename == []) ]
                              (ref $1)))
                          (let $3 (infertype $198))
                          (assign
                            (ref $3)
                            (select () [ (typename requires []) ] (ref $2)))
                          (free ontrue)
                          (let $4 (infertype $199))
                          (assign
                            (ref $4)
                            (select (ref ontrue) [ (typename apply []) ] ()))
                          (let $5 (infertype $200))
                          (assign
                            (ref $5)
                            (select
                              ()
                              [ (typename Done []) (typename create []) ]
                              (ref $4)))
                          (ref $5)
                        ]))
                    (let $11 (infertype $205))
                    (assign
                      (ref $11)
                      (lambda
                        []
                        [ (param $7 () ()) ]
                        (infertype $35)
                        [
                          (let $8 (infertype $202))
                          (assign
                            (ref $8)
                            (select
                              (param $7 () ())
                              [ (typename == []) ]
                              (ref $7)))
                          (let $9 (infertype $203))
                          (assign
                            (ref $9)
                            (select () [ (typename requires []) ] (ref $8)))
                          (let $10 (infertype $204))
                          (assign
                            (ref $10)
                            (select
                              ()
                              [ (typename FalseBranch []) (typename create []) ]
                              ()))
                          (ref $10)
                        ]))
                    (let $12 (infertype $206))
                    (assign (ref $12) (match (ref $0) [ (ref $6) (ref $11) ]))
                    (ref $12)
                  ]))
              (ref $13)
            ]))
        (function
          elseif
          (lambda
            [ (typeparam T () ()) (typeparam U () ()) ]
            [
              (param
                prev
                (uniontype
                  [
                    (typeref
                      [ (typename Done [ (typeref [ (typename T []) ]) ]) ])
                    (typeref [ (typename FalseBranch []) ])
                  ])
                ())
              (param
                cond
                (functiontype (tupletype []) (typeref [ (typename Bool []) ]))
                ())
            ]
            (functiontype
              (functiontype (tupletype []) (typeref [ (typename U []) ]))
              (uniontype
                [
                  (typeref
                    [ (typename Done [ (typeref [ (typename T []) ]) ]) ])
                  (typeref
                    [ (typename Done [ (typeref [ (typename U []) ]) ]) ])
                ]))
            [
              (let $4 (infertype $212))
              (assign
                (ref $4)
                (lambda
                  []
                  [ (param ontrue (infertype $37) ()) ]
                  (infertype $36)
                  [
                    (free prev)
                    (let $2 (infertype $210))
                    (assign
                      (ref $2)
                      (lambda
                        []
                        []
                        (infertype $38)
                        [
                          (free cond)
                          (let $0 (infertype $208))
                          (assign
                            (ref $0)
                            (select () [ (typename if []) ] (ref cond)))
                          (free ontrue)
                          (let $1 (infertype $209))
                          (assign
                            (ref $1)
                            (select
                              (ref $0)
                              [ (typename apply []) ]
                              (ref ontrue)))
                          (ref $1)
                        ]))
                    (let $3 (infertype $211))
                    (assign
                      (ref $3)
                      (select (ref prev) [ (typename else []) ] (ref $2)))
                    (ref $3)
                  ]))
              (ref $4)
            ]))
        (function
          else
          (lambda
            [ (typeparam T () ()) (typeparam U () ()) ]
            [
              (param
                prev
                (uniontype
                  [
                    (typeref
                      [ (typename Done [ (typeref [ (typename T []) ]) ]) ])
                    (typeref [ (typename FalseBranch []) ])
                  ])
                ())
              (param
                onfalse
                (functiontype (tupletype []) (typeref [ (typename U []) ]))
                ())
            ]
            (uniontype
              [
                (typeref [ (typename Done [ (typeref [ (typename T []) ]) ]) ])
                (typeref [ (typename Done [ (typeref [ (typename U []) ]) ]) ])
              ])
            [
              (let $5 (infertype $217))
              (assign
                (ref $5)
                (lambda
                  []
                  [ (param $0 () ()) ]
                  (infertype $39)
                  [
                    (let $1 (infertype $213))
                    (assign
                      (ref $1)
                      (select (param $0 () ()) [ (typename == []) ] (ref $0)))
                    (let $2 (infertype $214))
                    (assign
                      (ref $2)
                      (select () [ (typename requires []) ] (ref $1)))
                    (free onfalse)
                    (let $3 (infertype $215))
                    (assign
                      (ref $3)
                      (select (ref onfalse) [ (typename apply []) ] ()))
                    (let $4 (infertype $216))
                    (assign
                      (ref $4)
                      (select
                        ()
                        [ (typename Done []) (typename create []) ]
                        (ref $3)))
                    (ref $4)
                  ]))
              (let $6 (infertype $218))
              (assign
                (ref $6)
                (lambda
                  []
                  [
                    (param
                      v
                      (typeref
                        [ (typename Done [ (typeref [ (typename T []) ]) ]) ])
                      ())
                  ]
                  (infertype $40)
                  [ (ref v) ]))
              (let $7 (infertype $219))
              (assign (ref $7) (match (ref prev) [ (ref $5) (ref $6) ]))
              (ref $7)
            ]))
        (using (typeref [ (modulename $module-4 []) ]))
        (interface Any [] () [])
        (class
          None
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename None []) ]) (imm ) ])
                [
                  (let $0 (infertype $220))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          NoCatch
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename NoCatch []) ]) (imm ) ])
                [
                  (let $0 (infertype $221))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          Done
          [ (typeparam T () (typeref [ (typename None []) ])) ]
          ()
          [
            (field result (typeref [ (typename T []) ]) ())
            (function
              create
              (lambda
                [
                  (typeparam
                    R
                    (typeref
                      [ (typename Done [ (typeref [ (typename T []) ]) ]) ])
                    ())
                ]
                [
                  (param
                    from
                    (viewtype
                      (typeref [ (typename R []) ])
                      (typeref [ (typename T []) ]))
                    (lambda
                      []
                      []
                      (infertype $41)
                      [
                        (let $0 (infertype $222))
                        (assign
                          (ref $0)
                          (select
                            ()
                            [ (typename None []) (typename create []) ]
                            ()))
                        (ref $0)
                      ]))
                ]
                (typeref [ (typename R []) ])
                [
                  (let $1 (infertype $223))
                  (assign (ref $1) (new () (ref from)))
                  (ref $1)
                ]))
            (function
              apply
              (lambda
                [ (typeparam U () ()) ]
                [ (param x (typeref [ (typename U []) ]) ()) ]
                (typeref [ (typename U []) ])
                [ (ref x) ]))
          ])
        (using (typeref [ (modulename $module-4 []) ]))
        (class
          NoLabel
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename NoLabel []) ]) (imm ) ])
                [
                  (let $0 (infertype $224))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          Break
          [ (typeparam L () ()) ]
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype
                  [
                    (typeref
                      [ (typename Break [ (typeref [ (typename L []) ]) ]) ])
                    (imm )
                  ])
                [
                  (let $0 (infertype $225))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          Continue
          [ (typeparam L () ()) ]
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype
                  [
                    (typeref
                      [ (typename Continue [ (typeref [ (typename L []) ]) ]) ])
                    (imm )
                  ])
                [
                  (let $0 (infertype $226))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          break
          [ (typeparam L () (typeref [ (typename NoLabel []) ])) ]
          ()
          [
            (function
              create
              (lambda
                []
                []
                (throwtype
                  (typeref
                    [ (typename Break [ (typeref [ (typename L []) ]) ]) ]))
                [
                  (let $0 (infertype $227))
                  (assign
                    (ref $0)
                    (select
                      ()
                      [
                        (typename Break [ (typeref [ (typename L []) ]) ])
                        (typename create [])
                      ]
                      ()))
                  (throw (ref $0))
                ]))
          ])
        (class
          continue
          [ (typeparam L () (typeref [ (typename NoLabel []) ])) ]
          ()
          [
            (function
              create
              (lambda
                []
                []
                (throwtype
                  (typeref
                    [ (typename Continue [ (typeref [ (typename L []) ]) ]) ]))
                [
                  (let $0 (infertype $228))
                  (assign
                    (ref $0)
                    (select
                      ()
                      [
                        (typename Continue [ (typeref [ (typename L []) ]) ])
                        (typename create [])
                      ]
                      ()))
                  (throw (ref $0))
                ]))
          ])
        (function
          while
          (lambda
            [
              (typeparam L () (typeref [ (typename NoLabel []) ]))
              (typeparam T () ())
              (typeparam U () ())
            ]
            [
              (param
                cond
                (functiontype (tupletype []) (typeref [ (typename Bool []) ]))
                ())
            ]
            (functiontype
              (functiontype
                (tupletype [])
                (uniontype
                  [
                    (typeref [ (typename T []) ])
                    (throwtype (typeref [ (typename U []) ]))
                  ]))
              (uniontype
                [
                  (typeref [ (typename Done []) ])
                  (throwtype (typeref [ (typename U []) ]))
                ]))
            [
              (let $22 (infertype $248))
              (assign
                (ref $22)
                (lambda
                  []
                  [ (param body (infertype $43) ()) ]
                  (infertype $42)
                  [
                    (free cond)
                    (let $0 (infertype $229))
                    (assign
                      (ref $0)
                      (select (ref cond) [ (typename apply []) ] ()))
                    (let $19 (infertype $245))
                    (assign
                      (ref $19)
                      (lambda
                        []
                        [ (param $1 () ()) ]
                        (infertype $44)
                        [
                          (let $2 (infertype $230))
                          (assign
                            (ref $2)
                            (select
                              (param $1 () ())
                              [ (typename == []) ]
                              (ref $1)))
                          (let $3 (infertype $231))
                          (assign
                            (ref $3)
                            (select () [ (typename requires []) ] (ref $2)))
                          (let $6 (infertype $234))
                          (assign
                            (ref $6)
                            (lambda
                              []
                              []
                              (infertype $45)
                              [
                                (free body)
                                (let $4 (infertype $232))
                                (assign
                                  (ref $4)
                                  (select (ref body) [ (typename apply []) ] ()))
                                (let $5 (infertype $233))
                                (assign
                                  (ref $5)
                                  (select
                                    ()
                                    [
                                      (typename continue [])
                                      (typename create [])
                                    ]
                                    ()))
                                (ref $5)
                              ]))
                          (let $11 (infertype $238))
                          (assign
                            (ref $11)
                            (lambda
                              []
                              [ (param $7 () ()) ]
                              (infertype $46)
                              [
                                (let $8 (infertype $235))
                                (assign
                                  (ref $8)
                                  (select
                                    (param $7 () ())
                                    [ (typename == []) ]
                                    (ref $7)))
                                (let $9 (infertype $236))
                                (assign
                                  (ref $9)
                                  (select
                                    ()
                                    [ (typename requires []) ]
                                    (ref $8)))
                                (let $10 (infertype $237))
                                (assign
                                  (ref $10)
                                  (select
                                    ()
                                    [ (typename Done []) (typename create []) ]
                                    ()))
                                (ref $10)
                              ]))
                          (let $17 (infertype $243))
                          (assign
                            (ref $17)
                            (lambda
                              []
                              [ (param $12 () ()) ]
                              (infertype $47)
                              [
                                (let $13 (infertype $239))
                                (assign
                                  (ref $13)
                                  (select
                                    (param $12 () ())
                                    [ (typename == []) ]
                                    (ref $12)))
                                (let $14 (infertype $240))
                                (assign
                                  (ref $14)
                                  (select
                                    ()
                                    [ (typename requires []) ]
                                    (ref $13)))
                                (free cond)
                                (let $15 (infertype $241))
                                (assign
                                  (ref $15)
                                  (select
                                    ()
                                    [
                                      (typename
                                        while
                                        [ (typeref [ (typename L []) ]) ])
                                    ]
                                    (ref cond)))
                                (free body)
                                (let $16 (infertype $242))
                                (assign
                                  (ref $16)
                                  (select
                                    (ref $15)
                                    [ (typename apply []) ]
                                    (ref body)))
                                (ref $16)
                              ]))
                          (let $18 (infertype $244))
                          (assign
                            (ref $18)
                            (try (ref $6) [ (ref $11) (ref $17) ]))
                          (ref $18)
                        ]))
                    (let $20 (infertype $246))
                    (assign (ref $20) (lambda [] [] (infertype $48) []))
                    (let $21 (infertype $247))
                    (assign (ref $21) (match (ref $0) [ (ref $19) (ref $20) ]))
                    (ref $21)
                  ]))
              (ref $22)
            ]))
        (using (typeref [ (modulename $module-4 []) ]))
        (class
          NoMatch
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename NoMatch []) ]) (imm ) ])
                [
                  (let $0 (infertype $249))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (function
          as
          (lambda
            [ (typeparam T () ()) (typeparam U () ()) ]
            [ (param value (typeref [ (typename U []) ]) ()) ]
            (uniontype
              [
                (typeref [ (typename T []) ])
                (throwtype (typeref [ (typename NoMatch []) ]))
              ])
            [
              (let $0 (infertype $250))
              (assign
                (ref $0)
                (lambda
                  []
                  [ (param x (typeref [ (typename T []) ]) ()) ]
                  (infertype $49)
                  [ (ref x) ]))
              (let $2 (infertype $252))
              (assign
                (ref $2)
                (lambda
                  []
                  []
                  (infertype $50)
                  [
                    (let $1 (infertype $251))
                    (assign
                      (ref $1)
                      (select
                        ()
                        [ (typename NoMatch []) (typename create []) ]
                        ()))
                    (throw (ref $1))
                  ]))
              (let $3 (infertype $253))
              (assign (ref $3) (match (ref value) [ (ref $0) (ref $2) ]))
              (ref $3)
            ]))
        (function
          requires
          (lambda
            []
            [ (param pred (typeref [ (typename Bool []) ]) ()) ]
            (uniontype
              [
                (typeref [ (typename None []) ])
                (throwtype (typeref [ (typename NoMatch []) ]))
              ])
            [
              (let $0 (infertype $254))
              (assign (ref $0) (select () [ (typename not []) ] (ref pred)))
              (let $1 (infertype $255))
              (assign (ref $1) (select () [ (typename if []) ] (ref $0)))
              (let $3 (infertype $257))
              (assign
                (ref $3)
                (lambda
                  []
                  []
                  (infertype $51)
                  [
                    (let $2 (infertype $256))
                    (assign
                      (ref $2)
                      (select
                        ()
                        [ (typename NoMatch []) (typename create []) ]
                        ()))
                    (throw (ref $2))
                  ]))
              (let $4 (infertype $258))
              (assign
                (ref $4)
                (select (ref $1) [ (typename apply []) ] (ref $3)))
              (ref $4)
            ]))
        (class
          OrEquals
          [ (typeparam T1 () ()) (typeparam T2 () ()) ]
          ()
          [
            (field
              a
              (typeref
                [ (typename Equatable [ (typeref [ (typename T1 []) ]) ]) ])
              ())
            (field
              b
              (typeref
                [ (typename Equatable [ (typeref [ (typename T2 []) ]) ]) ])
              ())
            (function
              create
              (lambda
                [
                  (typeparam
                    S
                    (typeref
                      [
                        (typename
                          OrEquals
                          [
                            (typeref [ (typename T1 []) ])
                            (typeref [ (typename T2 []) ])
                          ])
                      ])
                    ())
                ]
                [
                  (param
                    a
                    (viewtype
                      (typeref [ (typename S []) ])
                      (typeref
                        [
                          (typename
                            Equatable
                            [ (typeref [ (typename T1 []) ]) ])
                        ]))
                    ())
                  (param
                    b
                    (viewtype
                      (typeref [ (typename S []) ])
                      (typeref
                        [
                          (typename
                            Equatable
                            [ (typeref [ (typename T2 []) ]) ])
                        ]))
                    ())
                ]
                (typeref [ (typename S []) ])
                [
                  (let
                    $0
                    (tupletype
                      [
                        (viewtype
                          (typeref [ (typename S []) ])
                          (typeref
                            [
                              (typename
                                Equatable
                                [ (typeref [ (typename T1 []) ]) ])
                            ]))
                        (viewtype
                          (typeref [ (typename S []) ])
                          (typeref
                            [
                              (typename
                                Equatable
                                [ (typeref [ (typename T2 []) ]) ])
                            ]))
                      ]))
                  (assign (ref $0) (tuple [ (ref a) (ref b) ]))
                  (let $1 (infertype $260))
                  (assign (ref $1) (new () (ref $0)))
                  (ref $1)
                ]))
            (function
              ==
              (lambda
                []
                [
                  (param
                    self
                    (typeref
                      [
                        (typename
                          OrEquals
                          [
                            (typeref [ (typename T1 []) ])
                            (typeref [ (typename T2 []) ])
                          ])
                      ])
                    ())
                  (param
                    x
                    (uniontype
                      [
                        (typeref [ (typename T1 []) ])
                        (typeref [ (typename T2 []) ])
                      ])
                    ())
                ]
                (typeref [ (typename Bool []) ])
                [
                  (let $2 (infertype $263))
                  (assign
                    (ref $2)
                    (lambda
                      []
                      [ (param y (typeref [ (typename T1 []) ]) ()) ]
                      (infertype $52)
                      [
                        (free self)
                        (let $0 (infertype $261))
                        (assign
                          (ref $0)
                          (select (ref self) [ (typename a []) ] ()))
                        (let $1 (infertype $262))
                        (assign
                          (ref $1)
                          (select (ref $0) [ (typename == []) ] (ref y)))
                        (ref $1)
                      ]))
                  (let $5 (infertype $266))
                  (assign
                    (ref $5)
                    (lambda
                      []
                      [ (param y (typeref [ (typename T2 []) ]) ()) ]
                      (infertype $53)
                      [
                        (free self)
                        (let $3 (infertype $264))
                        (assign
                          (ref $3)
                          (select (ref self) [ (typename b []) ] ()))
                        (let $4 (infertype $265))
                        (assign
                          (ref $4)
                          (select (ref $3) [ (typename == []) ] (ref y)))
                        (ref $4)
                      ]))
                  (let $7 (infertype $268))
                  (assign
                    (ref $7)
                    (lambda
                      []
                      []
                      (infertype $54)
                      [
                        (let $6 (infertype $267))
                        (assign (ref $6) (bool false))
                        (ref $6)
                      ]))
                  (let $8 (infertype $269))
                  (assign
                    (ref $8)
                    (match (ref x) [ (ref $2) (ref $5) (ref $7) ]))
                  (ref $8)
                ]))
          ])
        (function
          |
          (lambda
            [ (typeparam T1 () ()) (typeparam T2 () ()) ]
            [
              (param
                e1
                (typeref
                  [ (typename Equatable [ (typeref [ (typename T1 []) ]) ]) ])
                ())
              (param
                e2
                (typeref
                  [ (typename Equatable [ (typeref [ (typename T2 []) ]) ]) ])
                ())
            ]
            (typeref
              [
                (typename
                  OrEquals
                  [
                    (typeref [ (typename T1 []) ])
                    (typeref [ (typename T2 []) ])
                  ])
              ])
            [
              (let
                $0
                (tupletype
                  [
                    (typeref
                      [
                        (typename Equatable [ (typeref [ (typename T1 []) ]) ])
                      ])
                    (typeref
                      [
                        (typename Equatable [ (typeref [ (typename T2 []) ]) ])
                      ])
                  ]))
              (assign (ref $0) (tuple [ (ref e1) (ref e2) ]))
              (let $1 (infertype $271))
              (assign
                (ref $1)
                (select
                  ()
                  [ (typename OrEquals []) (typename create []) ]
                  (ref $0)))
              (ref $1)
            ]))
        (class
          Return
          [ (typeparam T () ()) ]
          ()
          [
            (field value (typeref [ (typename T []) ]) ())
            (function
              create
              (lambda
                [
                  (typeparam
                    S
                    (typeref
                      [ (typename Return [ (typeref [ (typename T []) ]) ]) ])
                    ())
                ]
                [
                  (param
                    value
                    (viewtype
                      (typeref [ (typename S []) ])
                      (typeref [ (typename T []) ]))
                    ())
                ]
                (typeref [ (typename S []) ])
                [
                  (let $0 (infertype $272))
                  (assign (ref $0) (new () (ref value)))
                  (ref $0)
                ]))
          ])
        (class
          return
          [ (typeparam T () (typeref [ (typename None []) ])) ]
          ()
          [
            (function
              create
              (lambda
                []
                [
                  (param
                    x
                    (typeref [ (typename T []) ])
                    (lambda
                      []
                      []
                      (infertype $55)
                      [
                        (let $0 (infertype $273))
                        (assign
                          (ref $0)
                          (select
                            ()
                            [ (typename None []) (typename create []) ]
                            ()))
                        (ref $0)
                      ]))
                ]
                (throwtype
                  (typeref
                    [ (typename Return [ (typeref [ (typename T []) ]) ]) ]))
                [
                  (let $1 (infertype $274))
                  (assign
                    (ref $1)
                    (select
                      ()
                      [
                        (typename Return [ (typeref [ (typename T []) ]) ])
                        (typename create [])
                      ]
                      (ref x)))
                  (throw (ref $1))
                ]))
          ])
      ])
    (class
      $module-4
      []
      ()
      [
        (class
          Bool
          []
          ()
          [
            (function
              apply
              (lambda
                []
                [ (param self (typeref [ (typename Bool []) ]) ()) ]
                (typeref [ (typename Bool []) ])
                [ (ref self) ]))
            (function
              bool
              (lambda
                []
                [ (param self (typeref [ (typename Bool []) ]) ()) ]
                (typeref [ (typename Bool []) ])
                [ (ref self) ]))
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename Bool []) ]) (imm ) ])
                [
                  (let $0 (infertype $275))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (interface
          ToBool
          []
          ()
          [
            (function
              bool
              (lambda
                []
                [ (param self (Self ) ()) ]
                (typeref [ (typename Bool []) ])
                []))
          ])
        (function
          and
          (lambda
            [
              (typeparam T (typeref [ (typename ToBool []) ]) ())
              (typeparam U () ())
            ]
            [
              (param a (typeref [ (typename T []) ]) ())
              (param
                b
                (functiontype (tupletype []) (typeref [ (typename U []) ]))
                ())
            ]
            (uniontype
              [ (typeref [ (typename T []) ]) (typeref [ (typename U []) ]) ])
            [
              (let $0 (infertype $276))
              (assign (ref $0) (select () [ (typename bool []) ] (ref a)))
              (let $4 (infertype $279))
              (assign
                (ref $4)
                (lambda
                  []
                  [ (param $1 () ()) ]
                  (infertype $56)
                  [
                    (let $2 (infertype $277))
                    (assign
                      (ref $2)
                      (select (param $1 () ()) [ (typename == []) ] (ref $1)))
                    (let $3 (infertype $278))
                    (assign
                      (ref $3)
                      (select () [ (typename requires []) ] (ref $2)))
                    (free a)
                    (ref a)
                  ]))
              (let $9 (infertype $283))
              (assign
                (ref $9)
                (lambda
                  []
                  [ (param $5 () ()) ]
                  (infertype $57)
                  [
                    (let $6 (infertype $280))
                    (assign
                      (ref $6)
                      (select (param $5 () ()) [ (typename == []) ] (ref $5)))
                    (let $7 (infertype $281))
                    (assign
                      (ref $7)
                      (select () [ (typename requires []) ] (ref $6)))
                    (free b)
                    (let $8 (infertype $282))
                    (assign
                      (ref $8)
                      (select (ref b) [ (typename apply []) ] ()))
                    (ref $8)
                  ]))
              (let $10 (infertype $284))
              (assign (ref $10) (match (ref $0) [ (ref $4) (ref $9) ]))
              (ref $10)
            ]))
        (function
          or
          (lambda
            [
              (typeparam T (typeref [ (typename ToBool []) ]) ())
              (typeparam U () ())
            ]
            [
              (param a (typeref [ (typename T []) ]) ())
              (param
                b
                (functiontype (tupletype []) (typeref [ (typename U []) ]))
                ())
            ]
            (uniontype
              [ (typeref [ (typename T []) ]) (typeref [ (typename U []) ]) ])
            [
              (let $0 (infertype $285))
              (assign (ref $0) (select () [ (typename bool []) ] (ref a)))
              (let $4 (infertype $288))
              (assign
                (ref $4)
                (lambda
                  []
                  [ (param $1 () ()) ]
                  (infertype $58)
                  [
                    (let $2 (infertype $286))
                    (assign
                      (ref $2)
                      (select (param $1 () ()) [ (typename == []) ] (ref $1)))
                    (let $3 (infertype $287))
                    (assign
                      (ref $3)
                      (select () [ (typename requires []) ] (ref $2)))
                    (free a)
                    (ref a)
                  ]))
              (let $9 (infertype $292))
              (assign
                (ref $9)
                (lambda
                  []
                  [ (param $5 () ()) ]
                  (infertype $59)
                  [
                    (let $6 (infertype $289))
                    (assign
                      (ref $6)
                      (select (param $5 () ()) [ (typename == []) ] (ref $5)))
                    (let $7 (infertype $290))
                    (assign
                      (ref $7)
                      (select () [ (typename requires []) ] (ref $6)))
                    (free b)
                    (let $8 (infertype $291))
                    (assign
                      (ref $8)
                      (select (ref b) [ (typename apply []) ] ()))
                    (ref $8)
                  ]))
              (let $10 (infertype $293))
              (assign (ref $10) (match (ref $0) [ (ref $4) (ref $9) ]))
              (ref $10)
            ]))
        (function
          not
          (lambda
            [ (typeparam T (typeref [ (typename ToBool []) ]) ()) ]
            [ (param a (typeref [ (typename T []) ]) ()) ]
            (typeref [ (typename Bool []) ])
            [
              (let $0 (infertype $294))
              (assign (ref $0) (select () [ (typename bool []) ] (ref a)))
              (let $5 (infertype $298))
              (assign
                (ref $5)
                (lambda
                  []
                  [ (param $1 () ()) ]
                  (infertype $60)
                  [
                    (let $2 (infertype $295))
                    (assign
                      (ref $2)
                      (select (param $1 () ()) [ (typename == []) ] (ref $1)))
                    (let $3 (infertype $296))
                    (assign
                      (ref $3)
                      (select () [ (typename requires []) ] (ref $2)))
                    (let $4 (infertype $297))
                    (assign (ref $4) (bool false))
                    (ref $4)
                  ]))
              (let $10 (infertype $302))
              (assign
                (ref $10)
                (lambda
                  []
                  [ (param $6 () ()) ]
                  (infertype $61)
                  [
                    (let $7 (infertype $299))
                    (assign
                      (ref $7)
                      (select (param $6 () ()) [ (typename == []) ] (ref $6)))
                    (let $8 (infertype $300))
                    (assign
                      (ref $8)
                      (select () [ (typename requires []) ] (ref $7)))
                    (let $9 (infertype $301))
                    (assign (ref $9) (bool true))
                    (ref $9)
                  ]))
              (let $11 (infertype $303))
              (assign (ref $11) (match (ref $0) [ (ref $5) (ref $10) ]))
              (ref $11)
            ]))
        (class
          Less
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename Less []) ]) (imm ) ])
                [
                  (let $0 (infertype $304))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          Equal
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename Equal []) ]) (imm ) ])
                [
                  (let $0 (infertype $305))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (class
          Greater
          []
          ()
          [
            (function
              create
              (lambda
                []
                []
                (isecttype [ (typeref [ (typename Greater []) ]) (imm ) ])
                [
                  (let $0 (infertype $306))
                  (assign (ref $0) (new () ()))
                  (ref $0)
                ]))
          ])
        (typealias
          Compare
          []
          (uniontype
            [
              (typeref [ (typename Less []) ])
              (typeref [ (typename Equal []) ])
              (typeref [ (typename Greater []) ])
            ])
          [])
        (interface
          Equatable
          [ (typeparam T () ()) ]
          ()
          [
            (function
              ==
              (lambda
                []
                [
                  (param self (Self ) ())
                  (param other (typeref [ (typename T []) ]) ())
                ]
                (typeref [ (typename Bool []) ])
                []))
            (function
              !=
              (lambda
                []
                [
                  (param self (Self ) ())
                  (param other (typeref [ (typename T []) ]) ())
                ]
                (typeref [ (typename Bool []) ])
                [
                  (let $0 (infertype $307))
                  (assign
                    (ref $0)
                    (select (ref self) [ (typename == []) ] (ref other)))
                  (let $1 (infertype $308))
                  (assign (ref $1) (select () [ (typename not []) ] (ref $0)))
                  (ref $1)
                ]))
          ])
        (interface
          Comparable
          [ (typeparam T () ()) ]
          (typeref [ (typename Equatable [ (typeref [ (typename T []) ]) ]) ])
          [
            (function
              <
              (lambda
                []
                [
                  (param self (Self ) ())
                  (param other (typeref [ (typename T []) ]) ())
                ]
                (typeref [ (typename Bool []) ])
                []))
            (function
              <=
              (lambda
                []
                [
                  (param self (Self ) ())
                  (param other (typeref [ (typename T []) ]) ())
                ]
                (typeref [ (typename Bool []) ])
                [
                  (let $0 (infertype $309))
                  (assign
                    (ref $0)
                    (select (ref self) [ (typename < []) ] (ref other)))
                  (let $1 (infertype $310))
                  (assign
                    (ref $1)
                    (select (ref self) [ (typename == []) ] (ref other)))
                  (let $2 (infertype $311))
                  (assign
                    (ref $2)
                    (select (ref $0) [ (typename or []) ] (ref $1)))
                  (ref $2)
                ]))
            (function
              >=
              (lambda
                []
                [
                  (param self (Self ) ())
                  (param other (typeref [ (typename T []) ]) ())
                ]
                (typeref [ (typename Bool []) ])
                [
                  (let $0 (infertype $312))
                  (assign
                    (ref $0)
                    (select (ref self) [ (typename < []) ] (ref other)))
                  (let $1 (infertype $313))
                  (assign (ref $1) (select () [ (typename not []) ] (ref $0)))
                  (ref $1)
                ]))
            (function
              >
              (lambda
                []
                [
                  (param self (Self ) ())
                  (param other (typeref [ (typename T []) ]) ())
                ]
                (typeref [ (typename Bool []) ])
                [
                  (let $0 (infertype $314))
                  (assign
                    (ref $0)
                    (select (ref self) [ (typename <= []) ] (ref other)))
                  (let $1 (infertype $315))
                  (assign (ref $1) (select () [ (typename not []) ] (ref $0)))
                  (ref $1)
                ]))
            (function
              <=>
              (lambda
                []
                [
                  (param self (Self ) ())
                  (param other (typeref [ (typename T []) ]) ())
                ]
                (typeref [ (typename Compare []) ])
                [
                  (let $0 (infertype $316))
                  (assign
                    (ref $0)
                    (select (ref self) [ (typename < []) ] (ref other)))
                  (let $1 (infertype $317))
                  (assign (ref $1) (select () [ (typename if []) ] (ref $0)))
                  (let $3 (infertype $319))
                  (assign
                    (ref $3)
                    (lambda
                      []
                      []
                      (infertype $62)
                      [
                        (let $2 (infertype $318))
                        (assign
                          (ref $2)
                          (select
                            ()
                            [ (typename Less []) (typename create []) ]
                            ()))
                        (ref $2)
                      ]))
                  (let $4 (infertype $320))
                  (assign
                    (ref $4)
                    (select (ref $1) [ (typename apply []) ] (ref $3)))
                  (let $5 (infertype $321))
                  (assign
                    (ref $5)
                    (select (ref self) [ (typename == []) ] (ref other)))
                  (let $6 (infertype $322))
                  (assign
                    (ref $6)
                    (select (ref $4) [ (typename elseif []) ] (ref $5)))
                  (let $8 (infertype $324))
                  (assign
                    (ref $8)
                    (lambda
                      []
                      []
                      (infertype $63)
                      [
                        (let $7 (infertype $323))
                        (assign
                          (ref $7)
                          (select
                            ()
                            [ (typename Equal []) (typename create []) ]
                            ()))
                        (ref $7)
                      ]))
                  (let $9 (infertype $325))
                  (assign
                    (ref $9)
                    (select (ref $6) [ (typename apply []) ] (ref $8)))
                  (let $11 (infertype $327))
                  (assign
                    (ref $11)
                    (lambda
                      []
                      []
                      (infertype $64)
                      [
                        (let $10 (infertype $326))
                        (assign
                          (ref $10)
                          (select
                            ()
                            [ (typename Greater []) (typename create []) ]
                            ()))
                        (ref $10)
                      ]))
                  (let $12 (infertype $328))
                  (assign
                    (ref $12)
                    (select (ref $9) [ (typename else []) ] (ref $11)))
                  (ref $12)
                ]))
          ])
      ])
  ])
