(class
  ()
  []
  ()
  [
    (class
      $module-0
      []
      ()
      [
        (class Cown [ (typeparam T () ()) ] () [])
        (class A [] () [])
        (class B [] () [])
        (function bar (lambda [] [] () []))
        (function
          foo
          (lambda
            []
            [
              (param
                a
                (typeref [ (typename Cown [ (typeref [ (typename A []) ]) ]) ])
                ())
              (param
                b
                (typeref [ (typename Cown [ (typeref [ (typename B []) ]) ]) ])
                ())
            ]
            ()
            [
              (let $0)
              (assign (ref $0) (lambda [] [] () []))
              (let $1)
              (assign (ref $1) (when (ref a) (ref $0)))
              (let $2)
              (assign (ref $2) (tuple [ (ref a) (ref b) ]))
              (let $3)
              (assign
                (ref $3)
                (lambda
                  []
                  []
                  ()
                  [
                    (let $0)
                    (assign (ref $0) (select () [ (typename bar []) ] ()))
                    (let $1)
                    (assign (ref $1) (lambda [] [] () []))
                    (let $2)
                    (assign (ref $2) (when (ref $0) (ref $1)))
                    (freelet b)
                    (let $3)
                    (assign
                      (ref $3)
                      (select (ref $2) [ (typename return []) ] (ref b)))
                    (ref $3)
                  ]))
              (let $4)
              (assign (ref $4) (when (ref $2) (ref $3)))
              (let $5)
              (assign
                (ref $5)
                (select (ref $1) [ (typename apply []) ] (ref $4)))
              (ref $5)
            ]))
      ])
  ])
